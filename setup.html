

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Setup &mdash; hardware_in_the_loop 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Configuration" href="config.html" />
    <link rel="prev" title="Welcome to the OlinHITL documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> hardware_in_the_loop
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#common-issues">Common issues</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/shell.html">The Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/tests.html">Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="hitl/roadkillharness.html">RoadkillHarness</a></li>
<li class="toctree-l1"><a class="reference internal" href="hitl/cancontroller.html">CANController</a></li>
<li class="toctree-l1"><a class="reference internal" href="hitl/iocontroller.html">IOController</a></li>
<li class="toctree-l1"><a class="reference internal" href="hitl/ecu.html">ECU</a></li>
<li class="toctree-l1"><a class="reference internal" href="hitl/utils.html">Utils</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">hardware_in_the_loop</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Setup</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/setup.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="setup">
<h1>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h1>
<p>DISCLAIMER: This process requires root permissions to edit some files.</p>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>A linux system. Due to the hardware interfaces that this project relies on, I STRONGLY recommend against using a virtual machine; this project will not work out of the box on a VM.</p></li>
<li><p>A python environment on your computer. At the very least, you _should_ be able to use the version of python that came installed with your operating system, but I recommend setting up <a class="reference external" href="https://realpython.com/intro-to-pyenv/">pyenv</a> with virtual environments to isolate this project’s dependencies.</p></li>
</ul>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>If you haven’t yet, clone this repository onto your computer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/olin-electric-motorsports/AdvancedResearch.git
</pre></div>
</div>
</li>
<li><p>Install drivers for the FTDI chip from <a class="reference external" href="https://ftdichip.com/drivers/d2xx-drivers/">this website</a> and follow the instructions in the <code class="docutils literal notranslate"><span class="pre">ReadMe.rtf</span></code> file.</p></li>
<li><p>To perform software installation and setup, navigate to the software directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd AdvancedResearch/hardware_in_the_loop/software
</pre></div>
</div>
</li>
<li><p>(Optional) If you want to setup a virtual environment for this project (I recommend it), now is the time. If you don’t know how to do this, read <a class="reference external" href="https://realpython.com/intro-to-pyenv/">this</a></p></li>
<li><p>Use pip to install the project and its dependencies on your computer. If you usually use <code class="docutils literal notranslate"><span class="pre">pip3</span></code> to invoke <code class="docutils literal notranslate"><span class="pre">pip</span></code>, use that instead; as long as the actual version of <code class="docutils literal notranslate"><span class="pre">pip</span></code> is &gt;3.6.0, you should be fine.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install -e .
</pre></div>
</div>
</li>
<li><p>Now that the software is installed, it’s time to configure hardware. For now, the only hardware we can connect to is an arduino. Go ahead and plug that in now. If you don’t have an arduino, thats fine; you just won’t be able to run all unit tests.</p></li>
<li><p>Now that your arduino is plugged in, verify that your computer recognizes it with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>`$ lsusb`
</pre></div>
</div>
</li>
</ol>
<p>You should see a your arduino listed as an option. If you don’t <strong>do not</strong> proceed to step 6; try unplugging it and plugging it in again.</p>
<ol class="arabic" start="7">
<li><p>Navigate to our <code class="docutils literal notranslate"><span class="pre">scripts</span></code> directory and run our hardware setup script:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cd scripts &amp;&amp; sudo python hardware_setup.py
</pre></div>
</div>
</li>
</ol>
<p>This script creates a udev rule which generates a permanent symbolic link to your arduino at <code class="docutils literal notranslate"><span class="pre">/dev/arduino</span></code>, so we never need to guess where to find it. The software defaults to these symbolic links if they are not specified in <code class="docutils literal notranslate"><span class="pre">config.ini</span></code>.</p>
<ol class="arabic" start="8">
<li><p>Restart your computer.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo shutdown -r now
</pre></div>
</div>
</li>
</ol>
<p>It is generally recommended to restart to reload udev rules. If you’re in a rush, you can try:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo udevadm control --reload-rules
</pre></div>
</div>
<p>but I generally recommend restarting just to be sure.</p>
</div>
<div class="section" id="common-issues">
<h2>Common issues<a class="headerlink" href="#common-issues" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p><strong>Wrong/mismatched python versions</strong></p>
<blockquote>
<div><p>If you’re having trouble using pip or python (especially when running with <code class="docutils literal notranslate"><span class="pre">sudo</span></code>), make sure you are using the right python version with <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">which</span> <span class="pre">python</span></code> or <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">which</span> <span class="pre">python3</span></code>. When I was setting this up, I noticed I was using the expected python interpreter when I called <code class="docutils literal notranslate"><span class="pre">python3</span></code> or <code class="docutils literal notranslate"><span class="pre">pip3</span></code>, but as soon as I ran <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">python3</span></code> or <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">pip3</span></code>, the python version was different. If this is confusing and you don’t know how to resolve it, please just follow the virtual environment tutorial I linked above to setup python &gt;=3.7 on your machine.</p>
</div></blockquote>
</li>
<li><p><strong>Missing hardware permissions</strong></p>
<blockquote>
<div><p>If the <code class="docutils literal notranslate"><span class="pre">hardware_setup.py</span></code> script is returning a <code class="docutils literal notranslate"><span class="pre">no</span> <span class="pre">langid</span></code> error or similar, it is probably because your user doesn’t have permission to get certain information from the USB device. Try running this command with <code class="docutils literal notranslate"><span class="pre">sudo</span></code> (and, as noted above, make sure you are using the expected python version).</p>
</div></blockquote>
</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="config.html" class="btn btn-neutral float-right" title="Configuration" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to the OlinHITL documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Alex Wenstrup

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>